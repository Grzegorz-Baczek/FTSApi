@page "/recipe/{Id:guid}"

@rendermode InteractiveServer
<PageTitle>Recipe</PageTitle>

@if (recipe is null)
{
	<MudContainer Class="d-flex justify-center mt-10">
		<MudProgressCircular Color="Color.Primary"
							 Indeterminate="true"
							 Size="Size.Large" />
	</MudContainer>
}
else
{
	<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-8">
		<MudCard Elevation="6" Class="pa-6">

			<MudText Typo="Typo.h4"
					 Align="Align.Center"
					 GutterBottom="true">
				@recipe.Title
			</MudText>

			@if (!string.IsNullOrWhiteSpace(recipe.ImageUrl))
			{
				<MudImage Src="@recipe.ImageUrl"
						  Alt="@recipe.Title"
						  Height="300"
						  Width="100"
						  Class="rounded-lg mb-4" />
			}

			<MudStack Row="true" Justify="Justify.Center" Class="mb-4">

				<MudText Typo="Typo.body2"
						 Class="px-3 py-1 rounded"
						 Style="">
					@(recipe.IsPublic ? "przepis publiczny" : "przepis prywatny")
				</MudText>

			</MudStack>

			<MudDivider Class="mb-4" />

			@if (recipe.RecipeIngredients is not null && recipe.RecipeIngredients.Count > 0)
			{
				<MudText Typo="Typo.h6" GutterBottom="true">
					Składniki:
				</MudText>

				<MudSimpleTable Hover="true" Bordered="true" Striped="true" Class="mb-6">
					<thead>
						<tr>
							<th>Składnik</th>
							<th>Ilość</th>
							<th>Jednostka</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var ingredient in recipe.RecipeIngredients)
						{
							<tr>
								<td>@ingredient.IngredientName</td>
								<td>@ingredient.Amount</td>
								<td>@ingredient.Unit</td>
							</tr>
						}
					</tbody>
				</MudSimpleTable>

				<MudDivider Class="mb-4" />
			}

			<MudText Typo="Typo.h6" GutterBottom="true">
				Opis Przepisu:
			</MudText>

			<MudText Typo="Typo.body1"
					 Style="white-space: pre-line;"
					 Class="mb-6">
				@recipe.Steps
			</MudText>

			<MudDivider Class="mb-4" />

			<MudText Typo="Typo.caption"
					 Align="Align.End"
					 Color="Color.Dark">
				Autor: @recipe.Author
			</MudText>
		</MudCard>
	</MudContainer>
}