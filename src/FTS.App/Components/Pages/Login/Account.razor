@page "/account"
@rendermode InteractiveServer

<PageTitle>Profil</PageTitle>

<div class="d-flex justify-center">
	<MudCard Elevation="4" Style="width: 450px; border-radius: 16px;">
		<MudCardContent Class="pa-6">

			@if (isLoading)
			{
				<div class="d-flex justify-center pa-4">
					<MudProgressCircular Indeterminate="true" Color="Color.Primary" />
				</div>
			}
			else if (error is not null)
			{
				<MudAlert Severity="Severity.Error" Class="mb-4">@error</MudAlert>
			}
			else if (user is not null)
			{
				<MudStack Direction="Row" Spacing="3" AlignItems="AlignItems.Center" Class="mb-4">
					<MudAvatar Color="Color.Primary" Size="Size.Large" Style="font-size: 1.5rem; font-weight: 700;">
						@GetInitial(user.Name)
					</MudAvatar>
					<MudStack Spacing="0">
						<MudText Typo="Typo.h6" Style="font-weight: 600;">@user.Name</MudText>
						<MudText Typo="Typo.caption" Color="Color.Dark">
							Dołączył: @user.CreatedAt.ToString("dd MMMM yyyy")
						</MudText>
					</MudStack>
				</MudStack>

				<MudDivider Class="my-3" />

				<MudStack Direction="Row" Spacing="3" Class="my-4" Justify="Justify.Center">
					<MudPaper Elevation="0" Class="pa-4 d-flex flex-column align-center" Style="border-radius: 12px; background: #efebe9; min-width: 140px;">
						<MudIcon Icon="@Icons.Material.Filled.EmojiEvents" Color="Color.Secondary" Size="Size.Large" />
						<MudText Typo="Typo.overline" Class="mt-1">Level</MudText>
						<MudText Typo="Typo.subtitle1" Style="font-weight: 700;">@user.Level</MudText>
					</MudPaper>
					<MudPaper Elevation="0" Class="pa-4 d-flex flex-column align-center" Style="border-radius: 12px; background: #efebe9; min-width: 140px;">
						<MudIcon Icon="@Icons.Material.Filled.Stars" Color="Color.Secondary" Size="Size.Large" />
						<MudText Typo="Typo.overline" Class="mt-1">Punkty</MudText>
						<MudText Typo="Typo.subtitle1" Style="font-weight: 700;">@user.RankPoints</MudText>
					</MudPaper>
				</MudStack>

				<MudDivider Class="my-3" />

				<MudStack Direction="Row" Spacing="2" Justify="Justify.Center">
					<MudButton Variant="Variant.Filled"
							   StartIcon="@Icons.Material.Filled.MenuBook"
							   Style="border-radius: 8px; text-transform: none; background: linear-gradient(135deg, #5d4037, #4e342e); color: white;"
							   Href="/createcookbook">
						Dodaj książkę kucharską
					</MudButton>
					<MudButton Variant="Variant.Outlined"
							   Color="Color.Primary"
							   StartIcon="@Icons.Material.Filled.PostAdd"
							   Style="border-radius: 8px; text-transform: none;"
							   Href="/createrecipe">
						Dodaj przepis
					</MudButton>
				</MudStack>
			}

		</MudCardContent>
	</MudCard>
</div>